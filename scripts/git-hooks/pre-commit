#!/bin/sh
# Pre-commit hook to run go fmt on all Go files

echo "Running go fmt ./..."

# Run go fmt on all files
go fmt ./...

# Check if there are any changes after formatting
if ! git diff --exit-code > /dev/null; then
    echo ""
    echo "Error: go fmt made formatting changes."
    echo "Please stage the formatted files and commit again."
    echo ""
    echo "Files that were formatted:"
    git diff --name-only
    echo ""
    exit 1
fi

echo "go fmt check passed!"
exit 0
